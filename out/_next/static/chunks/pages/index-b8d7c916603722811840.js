(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405,179],{9837:function(e,t,r){"use strict";r.d(t,{_y:function(){return s},cf:function(){return u}});var n=r(7294),a={light:{backgroundColor:"transparent",padding:"1rem",display:"flex",justifyContent:"space-between",color:" #000"},dark:{backgroundColor:"#293048",padding:"1rem",display:"flex",justifyContent:"space-between",color:" #fff"}},o={light:{display:"flex",padding:"1rem 2rem",backgroundColor:"#fff",color:"#000",justifyContent:"space-between",alignItems:"center"},dark:{display:"flex",color:"#fff",padding:"1rem 2rem",backgroundColor:"#293048",justifyContent:"space-between",alignItems:"center"}},i={light:{},dark:{}},c={mode:"dark",light:{bg:"#fff",palette:{},footer:a.light,header:o.light,body:i.light,title:{}},dark:{bg:"#000",palette:{},title:{},footer:a.dark,header:o.dark,body:i.dark}},s={theme:c[c.mode],mode:c.mode,toggleTheme:function(){c.mode="dark"===c.mode?"light":"dark",s.mode=c.mode,s.theme=c[c.mode]}},l=n.createContext(s),u=l.Provider;t.ZP=l},401:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSG:function(){return A},default:function(){return M}});var n=r(4919),a=r(7757),o=r.n(a),i=r(2137),c=r(9669),s=r.n(c),l=r(1163),u=r(7294),d=r(9008),m=r(5474),f=r.n(m),_=r(7434),h=r.n(_),p=function(e){var t=e.state,r=e.styles;return(0,n.tZ)(n.HY,{children:t?(0,n.BX)("div",{className:r.statusBlock,children:[(0,n.tZ)("span",{children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442"}),(0,n.tZ)("span",{className:r.circleActive})]}):(0,n.BX)("div",{className:r.statusBlock,children:[(0,n.tZ)("span",{children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442"}),(0,n.tZ)("span",{className:r.circleInActive})]})})},v=(0,u.memo)(p),g=r(9837),k=function(e){var t=e.serverState,r=(0,u.useContext)(g.ZP);return(0,n.BX)("header",{style:r.theme.header,children:[(0,n.tZ)("a",{href:"/",className:h().title,children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043a\u0430\u0441\u0441\u0438\u0440\u043e\u0432"}),(0,n.tZ)("div",{className:"bulk"}),(0,n.tZ)(v,{state:t,styles:h()})]})},N=(0,u.memo)(k),y=function(e){var t=e.status,r=(0,u.useState)(""),a=r[0],o=r[1],i=(0,u.useContext)(g.ZP);return(0,u.useEffect)((function(){setInterval((function(){var e=new Date;o(e.toLocaleString())}),1e3)}),[t]),(0,n.BX)("footer",{style:i.theme.footer,children:[(0,n.BX)("span",{children:["\u0412\u0435\u0440\u0441\u0438\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.ServerVersion]}),(0,n.BX)("span",{children:["\u0418\u043c\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",t.NetName]}),(0,n.tZ)("span",{children:a})]})},w=(0,u.memo)(y),B=function(e){var t=e.serverState,r=e.children,a=e.status;return(0,n.BX)("div",{className:f().wrapper,children:[(0,n.BX)(d.default,{children:[(0,n.tZ)("title",{children:"WorkerChanger"}),(0,n.tZ)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.tZ)(N,{serverState:t}),(0,n.tZ)("div",{className:f().container,children:(0,n.tZ)("main",{className:f().main,children:r})}),(0,n.tZ)(w,{status:a})]})},b=(0,u.memo)(B),Z=function(e){var t=e.children,r=e.show,a=e.onClose,o=e.autoClose,i=(0,u.useState)(r),c=i[0],s=i[1];(0,u.useEffect)((function(){o?(s(r),setTimeout((function(){s(!r)}),o)):s(r)}),[r]);return(0,n.BX)("div",{className:f().modal,style:{display:c?"inherit":"none"},onClick:function(e){e.stopPropagation(),a()},children:[(0,n.tZ)("div",{className:f().modalWrapper}),(0,n.tZ)("div",{className:f().modalTextBlock,children:t})]})},S=function(e){var t=e.styles,r=e.show;return(0,n.tZ)("section",{children:r?(0,n.BX)("ul",{className:t.info,children:[(0,n.tZ)("li",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0441\u0441\u0438\u0440\u0430 \u0438\u0437 \u0432\u044b\u043f\u0430\u0434\u0430\u044e\u0449\u0435\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430"}),(0,n.tZ)("li",{children:"\u041f\u043e\u0441\u043b\u0435 \u0432\u044b\u0431\u043e\u0440\u0430 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),(0,n.tZ)("li",{children:"\u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043a\u0430\u0441\u0441\u0438\u0440 \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 \u043e\u0442\u0440\u0430\u0436\u0435\u043d \u043a\u0443\u0440\u0441\u0438\u0432\u043e\u043c"})]}):null})},I=(0,u.memo)(S),O=r(6156),C=r(5139),x=r.n(C),H=function(e){var t=e.worker,r=e.title,a=e.emp,c=e.data,l=e.change,u=e.type,d=e.onSave,m=e.showModal,f=e.serverState,_=function(){var e=(0,i.Z)(o().mark((function e(r){var n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,s().get("/api/workers/getbyid?guid=".concat(t.GUIDString));case 3:n=e.sent,a=n.data.RK7Reference.Items[0].Item[0].OfficialName,i=n.data.RK7Reference.Items[0].Item[0].genTaxPayerIdNum,m(a+" "+i,"success");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,n.BX)("form",{className:x().form,children:[(0,n.BX)("div",{className:x().header,children:[(0,n.BX)("h3",{children:["\u041a\u0430\u0441\u0441\u0438\u0440 ",r]}),(0,n.tZ)("button",{className:x().infoButton,onClick:_,children:"\u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})]}),(0,n.BX)("span",{children:["\u0424\u0418\u041e: ",t.OfficialName]}),(0,n.BX)("span",{children:["\u0418\u041d\u041d: ",t.genTaxPayerIdNum]}),(0,n.tZ)("hr",{}),c.GUIDString.length>0?(0,n.BX)("div",{className:x().inform,children:[(0,n.tZ)("h3",{children:"\u041a\u0430\u0441\u0441\u0438\u0440 \u043f\u043e\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043d\u0430:"}),(0,n.BX)("span",{children:["\u0424\u0418\u041e: ",c.OfficialName]}),(0,n.BX)("span",{children:["\u0418\u041d\u041d: ",c.genTaxPayerIdNum]})]}):null,(0,n.BX)("select",{id:u,onChange:function(e){return l(e)},className:x().input,children:[(0,n.BX)("option",{value:t.GUIDString,className:x().currentOption,children:[t.OfficialName," : ",t.genTaxPayerIdNum]}),a.length>0?a.filter((function(e){return e.genTaxPayerIdNum!==t.genTaxPayerIdNum})).map((function(e){return(0,n.BX)("option",{value:e.GUIDString,children:[e.OfficialName," :"," ",e.genTaxPayerIdNum]},e.GUIDString)})):null]}),f?(0,n.tZ)("button",{onClick:function(e){e.preventDefault(),d(c,u)},className:x().submit,children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}):null]})},X=u.memo(H);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,O.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T={genTaxPayerIdNum:null,Code:null,Ident:null,Name:"",OfficialName:"",Status:"",GUIDString:""},j=function(e){var t=e.workers,r=e.showModal,a=e.serverState,c=((0,l.useRouter)(),(0,u.useState)(t.find((function(e){return"\u041a\u0430\u0441\u0441\u0438\u0440 \u041e\u041e\u041e"===e.Name})))),d=c[0],m=(c[1],(0,u.useState)(t.find((function(e){return"\u041a\u0430\u0441\u0441\u0438\u0440 \u0418\u041f"===e.Name})))),_=m[0],h=(m[1],(0,u.useState)(T)),p=h[0],v=h[1],g=(0,u.useState)(T),k=g[0],N=g[1],y=(0,u.useState)(t.filter((function(e){return""!==e.OfficialName&&"\u041a\u0430\u0441\u0441\u0438\u0440 \u0418\u041f"!==e.Name&&"\u041a\u0430\u0441\u0441\u0438\u0440 \u041e\u041e\u041e"!==e.Name&&e.genTaxPayerIdNum.toString.length>0}))),w=y[0],B=(y[1],function(e){var t=e.target,r=t.id,n=t.value,a=w.find((function(e){return n===e.GUIDString}));"OOO"===r&&N(a?D(D({},a),{},{GUIDString:d.GUIDString}):T),"IP"===r&&v(a?D(D({},a),{},{GUIDString:_.GUIDString}):T)}),b=function(){var e=(0,i.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().post("/api/setworker",{worker:t});case 2:"Ok"===e.sent.data.commandResult.Status?(r("\u041a\u0430\u0441\u0441\u0438\u0440 ".concat(n," \u0438\u0437\u043c\u0435\u043d\u0435\u043d. \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"),"refresh"),"OOO"===n&&N(T),"IP"===n&&v(T)):r("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430! \u041a\u0430\u0441\u0441\u0438\u0440 ".concat(n," \u043d\u0435\u0438\u0437\u043c\u0435\u043d\u0435\u043d. \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"),"error");case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return(0,n.BX)("div",{className:f().formWrapper,children:[(0,n.tZ)(X,{title:"\u0418\u041f",emp:w,data:p,change:B,worker:_,type:"IP",onSave:b,showModal:r,serverState:a}),(0,n.tZ)(X,{title:"\u041e\u041e\u041e",emp:w,data:k,change:B,worker:d,type:"OOO",onSave:b,showModal:r,serverState:a})]})},E=function(){return(0,n.BX)("div",{className:f().errorBlock,children:[(0,n.tZ)("h2",{className:f().errorMessage,children:"\u041d\u0435\u0442 \u0441\u0432\u044f\u0437\u0438 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c"}),(0,n.tZ)("p",{children:"\u0421\u0432\u044f\u0436\u0438\u0442\u0435\u0441\u044c \u0441 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u043e\u0439"})]})},G=function(e){var t=e.state,r=e.workers,a=e.showModal,o=e.styles;return(0,n.BX)("section",{className:o.section,children:[t?(0,n.tZ)(j,{workers:r,showModal:a,serverState:t}):(0,n.tZ)(E,{}),(0,n.tZ)("div",{className:"bulk"})]})},U=(0,u.memo)(G),A=!0,M=function(e){var t=e.workers,r=e.status,a=(e.commandResult,(0,u.useContext)(g.ZP),(0,l.useRouter)()),c=(0,u.useState)(!1),d=c[0],m=c[1],_=(0,u.useState)(""),h=_[0],p=_[1],v=(0,u.useState)("Ok"===r.Status),k=v[0],N=v[1],y=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get("/api/getStatus");case 2:e.sent.data.error?N(!1):N(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){setInterval((function(){console.log("refresh"),y()}),3e4)}),[]);var w=(0,u.useCallback)((function(e){p(e),m(!d)}),[d]),B=(0,u.useCallback)((function(){p(""),m(!d)}),[d]);return(0,n.BX)(b,{serverState:k,status:r,children:[(0,n.tZ)(I,{styles:f(),show:k}),(0,n.tZ)(U,{workers:t,styles:f(),showModal:w,state:k}),(0,n.BX)(Z,{show:d,onClose:B,children:[(0,n.tZ)("p",{children:h}),(0,n.tZ)("button",{className:f().modalButton,onClick:function(){p(""),m(!1),a.reload()},children:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"})]})]})}},5301:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(401)}])},5139:function(e){e.exports={form:"Cashier_form__dr-7K",header:"Cashier_header__1F_3e",infoButton:"Cashier_infoButton__Dn18_",inform:"Cashier_inform__bZYDJ",input:"Cashier_input__26JBn",currentOption:"Cashier_currentOption__2NI9E",option:"Cashier_option__3VB9K",submit:"Cashier_submit__QiJmT",button:"Cashier_button__1FQHE"}},7434:function(e){e.exports={header:"Header_header__182Qc",title:"Header_title__1vi4d",circleActive:"Header_circleActive__I4VLX",circleInActive:"Header_circleInActive__Ys6GJ",statusBlock:"Header_statusBlock__2bZwf"}},5474:function(e){e.exports={container:"Home_container__1EcsU",wrapper:"Home_wrapper__3EDsh",main:"Home_main__1x8gC",section:"Home_section__16Giz",titleBlock:"Home_titleBlock__1Inm8",title:"Home_title__3DjR7",circleActive:"Home_circleActive__2EdrU",circleInActive:"Home_circleInActive__3DR7d",grid:"Home_grid__2Ei2F",card:"Home_card__2SdtB",cardTitle:"Home_cardTitle__2c4qx",cardText:"Home_cardText__fqI49",label:"Home_label__36S2X",button:"Home_button__Xc9mA",error:"Home_error__2G27F",modal:"Home_modal__1PpCQ",modalWrapper:"Home_modalWrapper__2crM4",moveWrapper:"Home_moveWrapper__1J9jY",modalTextBlock:"Home_modalTextBlock__97UxQ",move:"Home_move__1eLl-",modalButton:"Home_modalButton__21sTB",formWrapper:"Home_formWrapper__1ryuI",input:"Home_input__2_zyB",errorBlock:"Home_errorBlock__27OHX",errorMessage:"Home_errorMessage__aZmWd",info:"Home_info__337F2"}},4453:function(){}},function(e){e.O(0,[774,597,919,969],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);